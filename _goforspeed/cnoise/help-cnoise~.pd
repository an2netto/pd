#N canvas 358 93 937 591 10;
#X msg 448 -83 bang;
#X obj 448 67 t f f;
#N canvas 0 22 450 300 (subpatch) 0;
#X array hfa 8192 float 2;
#X coords 0 -1 8192 1 200 140 1;
#X restore 450 236 graph;
#X msg 532 -27 1;
#X obj 13 71 env~;
#X floatatom 13 95 5 0 0 0 - - -, f 5;
#X obj 622 -84 hsl 128 15 0 4 0 0 empty empty alpha -2 6 0 8 -260818
-1 -1 0 1;
#X obj 619 -28 t b f;
#X floatatom 711 -58 10 0 0 0 - - -, f 10;
#N canvas 267 182 711 590 spectrum 0;
#X obj 136 73 rfft~;
#X obj 380 25 block~ 1024;
#X floatatom 73 73 5 0 0 0 - - -, f 5;
#X msg 172 159 slide 10 10;
#X msg 92 193 range 0 512 \, 2 \, bufsize 512;
#X obj 226 25 inlet~;
#X obj 24 117 *~ 0.55;
#X obj 226 73 *~ 1;
#X floatatom 295 25 5 0 0 0 - - -, f 5;
#X obj 24 25 cyclone/count~ 0 1024 1 1;
#X obj 136 117 cyclone/cartopol~;
#X obj 24 233 cyclone/Scope~ 562 220 2 3 512 0 512 0 0 0 0 102 255
51 135 135 135 0;
#X obj 24 159 cyclone/vectral~ 1024;
#X connect 0 0 10 0;
#X connect 0 1 10 1;
#X connect 2 0 6 1;
#X connect 3 0 12 0;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 12 0;
#X connect 7 0 0 0;
#X connect 8 0 7 1;
#X connect 9 0 6 0;
#X connect 9 0 12 1;
#X connect 10 0 12 2;
#X connect 12 0 11 0;
#X restore 153 73 pd spectrum;
#X obj 164 -45 hsl 128 15 0 100 0 0 empty empty Level -2 8 0 8 -258699
-1 -1 0 1;
#X obj 161 -10 dbtorms;
#X floatatom 230 -22 5 0 0 0 - - -, f 5;
#X msg 771 310 \; pd dsp 0;
#X msg 772 349 \; pd dsp 1;
#X obj 619 -58 / 2;
#X obj 448 106 expr ($f3/$f1)*($f2 + $f1 -1);
#X obj 604 143 + 1;
#N canvas 0 22 490 340 guts 0;
#X obj 24 86 loadbang;
#X msg 261 116 \; hfa yticks 0 0.1 2;
#X msg 68 170 \; hfa ylabel 8200 1 0 -1;
#X msg 68 117 \; hfa xticks 0 100 8192;
#X connect 0 0 3 0;
#X connect 0 0 2 0;
#X connect 0 0 1 0;
#X restore 771 280 pd guts;
#X obj 8 -149 cnv 15 400 60 empty empty Colored_Noise_Generation 20
12 0 18 -260818 -66577 0;
#X text 326 -107 A. Zin \, 2006;
#X obj 448 179 tabwrite hfa;
#X text 627 30 hfa(i) = hfa(i-1)*(alpha/2 + (i-2))/(i-1);
#X text 558 -116 (gives the "color" of the noise);
#X obj 73 130 dac~;
#N canvas 0 22 474 324 cpu_load 0;
#X obj 113 259 outlet;
#X obj 113 170 cputime;
#X obj 113 30 loadbang;
#X msg 113 58 1;
#X floatatom 113 86 0 0 0 0 - - -;
#X obj 113 142 t b b;
#X obj 113 230 * 0.1;
#X obj 113 199 int;
#X text 158 86 <-- on/off;
#X obj 113 114 metro 500;
#X connect 1 0 7 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 5 0 1 0;
#X connect 5 1 1 1;
#X connect 6 0 0 0;
#X connect 7 0 6 0;
#X connect 9 0 5 0;
#X restore 772 226 pd cpu_load;
#X floatatom 772 255 5 0 0 0 - - -, f 5;
#X text 25 302 Colored noise generation based on J.N. Kasdin;
#X text 25 314 algorithm("Discrete simulation of colored noise and
stochastic processes and 1/f^alpha power law noise generation" \, Proc.
IEEE \, V. 83 \, N. 5 \, May 1995). White gaussian noise is convolved
with tailored array of coefficients such that the final spectrum is
proportional to 1/f^alpha;
#X text 627 14 Recursion equation for hfa coeff:;
#X obj 73 -5 *~;
#X obj 72 -48 noise~;
#X text 344 -45 3);
#X text 805 -86 2);
#X text 870 358 1);
#X text 627 46 hfa(1) = 1;
#X text 30 -108 Help patch;
#X obj 448 -55 t b b;
#N canvas 0 22 478 328 iterate 0;
#X obj 60 70 f;
#X obj 98 69 + 1;
#X obj 60 30 until;
#X obj 131 -7 inlet;
#X obj 97 156 outlet;
#X obj 60 -8 inlet;
#X obj 60 105 sel 4096;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 1 0 0 1;
#X connect 2 0 0 0;
#X connect 3 0 0 1;
#X connect 5 0 2 0;
#X connect 6 0 2 1;
#X connect 6 1 4 0;
#X restore 448 34 pd iterate;
#X obj 448 144 t f f;
#X text 12 -80 Input: white gaussian noise (uniform is good as well)
;
#X text 840 357 <--;
#X text 780 -85 <--;
#X text 319 -45 <--;
#X text 560 -143 minus alpha is the slope of the spectrum in a log(PSD)-log(f)
plot.;
#X text 713 87 alpha = 0 --> white;
#X text 713 101 alpha = 1 --> pink;
#X text 713 116 alpha = 2 --> brown;
#X obj 532 0 t f f f f;
#X obj 73 41 fft_convolution 8192 hfa;
#X obj 154 110 cyclone/Scope~ 249 177 256 3 128 -1 1 0 0 0 0 102 255
51 135 135 135 0;
#X connect 0 0 37 0;
#X connect 1 0 16 0;
#X connect 1 1 17 0;
#X connect 3 0 48 0;
#X connect 4 0 5 0;
#X connect 6 0 8 0;
#X connect 6 0 15 0;
#X connect 7 0 0 0;
#X connect 7 1 16 1;
#X connect 10 0 11 0;
#X connect 10 0 12 0;
#X connect 11 0 30 1;
#X connect 15 0 7 0;
#X connect 16 0 39 0;
#X connect 17 0 21 1;
#X connect 25 0 26 0;
#X connect 30 0 49 0;
#X connect 31 0 30 0;
#X connect 37 0 38 0;
#X connect 37 1 3 0;
#X connect 38 0 1 0;
#X connect 39 0 21 0;
#X connect 39 1 16 2;
#X connect 48 0 38 1;
#X connect 48 1 21 0;
#X connect 48 2 21 1;
#X connect 48 3 16 2;
#X connect 49 0 9 0;
#X connect 49 0 4 0;
#X connect 49 0 24 0;
#X connect 49 0 24 1;
#X connect 49 0 50 0;
