#N canvas 40 110 1256 802 10;
#X obj 113 53 inlet;
#X text 262 653 \$1 symbol id \, e.g. bd \, sn \, tune etc;
#X text 262 671 \$2 pattern length;
#X obj 763 83 array define \$1-pattern \$2;
#X obj 763 133 array define \$1-pitch \$2;
#X obj 763 158 array define \$1-duration \$2;
#X obj 763 183 array define \$1-accent \$2;
#X obj 763 208 array define \$1-gate \$2;
#X text 155 44 onset pattern in decimal form;
#X text 154 62 the number of onsets will be a list length for other
params;
#X obj 66 463 dec2bin;
#X obj 87 539 array set \$1-pattern;
#X obj 121 493 list-distrib;
#X obj 350 488 array get \$1-pattern;
#X obj 369 458 t b l;
#X obj 350 514 list-distrib;
#X obj 350 539 array set \$1-pitch;
#X obj 505 489 array get \$1-pattern;
#X obj 524 459 t b l;
#X obj 505 515 list-distrib;
#X obj 505 540 array set \$1-duration;
#X obj 656 490 array get \$1-pattern;
#X obj 675 460 t b l;
#X obj 656 516 list-distrib;
#X obj 656 541 array set \$1-accent;
#X obj 41 159 array get \$1-pattern, f 10;
#X obj 41 201 print pattern;
#X obj 872 276 array define \$0-absgate \$2;
#X obj 124 513 array set \$0-absgate;
#X obj 807 490 array get \$1-pattern;
#X obj 816 456 t b l;
#X obj 807 516 list-distrib;
#X obj 827 672 array set \$1-gate;
#X obj 836 571 list-iter;
#X obj 887 598 array get \$0-absgate 0 1;
#X obj 827 645 list-group;
#X obj 807 541 t b l;
#X obj 846 620 *;
#X obj 369 432 list;
#X obj 524 435 list;
#X obj 816 432 list;
#X obj 675 436 list;
#X obj 65 348 t b l l;
#X obj 763 108 array define \$1-onsetid \$2;
#X text 762 61 pattern \, onset id \, pitch \, duration \, accent \,
gate;
#X text 761 47 data storage;
#X obj 113 84 route bang \$1-pattern \$1-pitch \$1-duration \$1-accent
\$1-gate \$1-onsetid, f 71;
#X obj 997 489 array get \$1-pattern;
#X obj 1016 459 t b l;
#X obj 997 515 list-distrib;
#X obj 1016 435 list;
#X obj 997 540 array set \$1-onsetid;
#X text 927 109 could be used to assign an instrument to onset;
#N canvas 786 481 568 470 to_phase 0;
#X obj 142 131 list-iter;
#X obj 142 249 f;
#X obj 142 160 t b f;
#X obj 142 191 spigot;
#X obj 100 62 inlet;
#X text 148 63 list in binary format;
#X obj 100 308 list-group;
#X obj 100 330 outlet;
#X obj 231 200 *;
#X obj 246 153 swap 1;
#X obj 246 175 /;
#X obj 100 84 t b l b;
#X obj 246 131 array size \$1-pattern;
#X connect 0 0 2 0;
#X connect 0 1 8 0;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 1 0;
#X connect 4 0 11 0;
#X connect 6 0 7 0;
#X connect 8 0 1 1;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 8 1;
#X connect 11 0 6 0;
#X connect 11 1 0 0;
#X connect 11 2 12 0;
#X connect 12 0 9 0;
#X restore 66 593 pd to_phase;
#X obj 66 666 outlet;
#X text 141 593 onset visualisation;
#X obj 66 617 list-map;
#X obj 126 617 * 100;
#X obj 66 642 list prepend 1;
#X connect 0 0 46 0;
#X connect 10 0 11 0;
#X connect 10 0 12 0;
#X connect 10 0 53 0;
#X connect 12 0 28 0;
#X connect 13 0 15 0;
#X connect 14 0 13 0;
#X connect 14 1 15 1;
#X connect 15 0 16 0;
#X connect 17 0 19 0;
#X connect 18 0 17 0;
#X connect 18 1 19 1;
#X connect 19 0 20 0;
#X connect 21 0 23 0;
#X connect 22 0 21 0;
#X connect 22 1 23 1;
#X connect 23 0 24 0;
#X connect 25 0 26 0;
#X connect 29 0 31 0;
#X connect 30 0 29 0;
#X connect 30 1 31 1;
#X connect 31 0 36 0;
#X connect 33 0 37 0;
#X connect 33 1 34 0;
#X connect 34 0 37 1;
#X connect 35 0 32 0;
#X connect 36 0 35 0;
#X connect 36 1 33 0;
#X connect 37 0 35 0;
#X connect 38 0 14 0;
#X connect 39 0 18 0;
#X connect 40 0 30 0;
#X connect 41 0 22 0;
#X connect 42 0 38 0;
#X connect 42 0 39 0;
#X connect 42 0 41 0;
#X connect 42 0 40 0;
#X connect 42 0 50 0;
#X connect 42 1 10 0;
#X connect 42 2 12 1;
#X connect 46 1 42 0;
#X connect 46 2 38 1;
#X connect 46 3 39 1;
#X connect 46 4 41 1;
#X connect 46 5 40 1;
#X connect 46 6 50 1;
#X connect 47 0 49 0;
#X connect 48 0 47 0;
#X connect 48 1 49 1;
#X connect 49 0 51 0;
#X connect 50 0 48 0;
#X connect 53 0 56 0;
#X connect 56 0 58 0;
#X connect 56 1 57 0;
#X connect 57 0 56 1;
#X connect 58 0 54 0;
