#N canvas 197 75 675 596 10;
#X obj 357 348 list;
#X obj 274 299 once;
#X obj 306 228 t b l;
#X msg 274 271 reload;
#X obj 232 35 inlet;
#X text 193 106 phase;
#X obj 71 390 outlet;
#X obj 110 193 sel;
#X obj 386 199 outlet;
#X obj 80 368 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 71 346 sel 1;
#X obj 232 61 route float list;
#X obj 278 83 t l l;
#N canvas 724 316 568 470 to_phase 0;
#X obj 142 131 list-iter;
#X obj 142 249 f;
#X obj 142 160 t b f;
#X obj 142 191 spigot;
#X obj 100 62 inlet;
#X text 143 63 list in binary format;
#X obj 100 308 list-group;
#X obj 100 330 outlet;
#X obj 231 200 *;
#X obj 246 153 swap 1;
#X obj 246 175 /;
#X obj 100 84 t b l b;
#X obj 246 131 array size \$0onsets;
#X connect 0 0 2 0;
#X connect 0 1 8 0;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 3 0 1 0;
#X connect 4 0 11 0;
#X connect 6 0 7 0;
#X connect 8 0 1 1;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 8 1;
#X connect 11 0 6 0;
#X connect 11 1 0 0;
#X connect 11 2 12 0;
#X connect 12 0 9 0;
#X restore 381 177 pd to_phase;
#X obj 440 100 list-sum;
#X text 432 200 onsets in phase format;
#X obj 440 144 array define \$0onsets;
#X obj 357 372 array set \$0onsets;
#X msg 440 122 resize \$1;
#X obj 71 322 array get \$0onsets 0 1;
#X text 139 187 reset pattern at 0 if it did change, f 18;
#X obj 306 112 dec2bin;
#X obj 71 149 t f f;
#X text 123 393 TODO: should return onset id instead;
#X connect 0 0 17 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 2 1 0 1;
#X connect 3 0 1 0;
#X connect 4 0 11 0;
#X connect 7 0 1 0;
#X connect 10 0 9 0;
#X connect 10 0 6 0;
#X connect 11 0 22 0;
#X connect 11 1 12 0;
#X connect 12 0 21 0;
#X connect 12 1 14 0;
#X connect 13 0 8 0;
#X connect 14 0 18 0;
#X connect 18 0 16 0;
#X connect 19 0 10 0;
#X connect 21 0 13 0;
#X connect 21 0 2 0;
#X connect 22 0 19 0;
#X connect 22 1 7 0;
